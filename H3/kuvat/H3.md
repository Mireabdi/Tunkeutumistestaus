### Tunkeutumistestaus ICI005AS3A-3005

## Abdirahman Mire

# H3 Täysin Laillinen Sertifikaatti

### Työympäristö:

Käyttöjärjestelmä: Windows 11 Pro 64-bit

CPU: Intel Core i7-12700KF - 4 cores in use

RAM: 6 GB DDR4

Disk: 80gb

Virtuaalikone: VMware, Kali Linux
## X)

## A) Totally Legit Sertificate.

### ZAP asennus ja sertifikaatti

Aloitin asentamalla Zapin: 

`sudo apt-get update`

`sudo apt install zaproxy -y`

![kuva1](/H3/kuvat/kuvat/kuva1.png)

käynnistin Zap:in:

`zaproxy`

![kuva1](/H3/kuvat/kuvat/kuva2.png)

Avattuani ohjelman suunnisti: tools -> Options -> Network -> Server Certificates.

![kuva1](/H3/kuvat/kuvat/kuva3.png)

Generoin uuden sertifikaatin klikkaamalla Generate painiketta. Tämän jälkeen tallensin sertifikaatin: **/home/kali** hakemistoon.

![kuva1](/H3/kuvat/kuvat/kuva4.png)

Tämän jälkeen ryhdyin asentamaan sertifikaattia Firefoxiin. Suunnistin Firefoxissa: Preferences -> Privacy & Security -> Certificates -> View certificates

Sieltä valitsin import ja valitsin juuri generoimani ja tallentamani sertifikaati: `zap_root_ca.cer`

Rastitin `Trust this CA to identify websites`

![kuva1](/H3/kuvat/kuvat/kuva5.png)

### Foxyproxy

Seuraavaksi ryhdyin asentamaan foxyproxyä Firefoxin add-ons sivulta ja ryhdyin lisäämään ZAP Proxyä siihen.

![kuva1](/H3/kuvat/kuvat/kuva11.png)

starttasin apache2: 

`sudo systemctl enable apache2`

siirryin selaimella localhost ja sain proxyn toimimaan: 

![kuva1](/H3/kuvat/kuvat/kuva10.png)

## Portswigger Labra

### C) Reflected XSS

Katsoin videon aiheesta Reflected XSS into HTML context with nothing encoded ja ryhdyin ratkaisemaan tehtävää.

Kokeilin ensin hakea:  `<p> hello <p>` ja ymmärsin että tämä lisäsi rivin hakuun, tämä tarkoittaa että palvelin ei käsitellyt syötettä vaan palautti sen sellaisenaan. Tämä mahdollistaa XSS hyökkäyksen. 

![kuva1](/H3/kuvat/kuvat/kuva8.png)

Kokeilin seuraavaksi alert funktiota: `<script> alert("Alert Alert Alert") </script>`

Tämä onnistui ja sain näytölle seuraavan viestin: 

![kuva1](/H3/kuvat/kuvat/kuva9.png)

### D) Stored XSS

Aloitin katsomalla: What Is Stored XSS? (Cross Site Scripting)

Ryhdyin ratkomaan labraa, aloitin kokeilemalla kenttään: `<H1> hello </H1>`

![kuva1](/H3/kuvat/kuvat/kuva12.png)

H1 ei näy ja tämä taas kertoo että sivu on haavoittuvainen XSS hyökkäykseen. 
Kokeilin taas `<script> alert("Alert Alert Alert") </script>` ja lisäsin tarvittavat tiedot jotta sain kommentin postattua.

![kuva1](/H3/kuvat/kuvat/kuva13.png)
![kuva1](/H3/kuvat/kuvat/kuva14.png)

Kun palasin blogiin, scripti suoritettiin selaimessa, eli XSS-hyökkäys onnistui. Vika johtuu siitä, ettei palvelin puhdista tai koodaa tallennettua syötettä, mikä mahdollistaa JavaScriptin suorittamisen muiden käyttäjien selaimessa.

![kuva1](/H3/kuvat/kuvat/kuva15.png)


Yhteenveto tehtävistä C ja D:

Molemmissa XSS-hyökkäyksissä palvelin näyttää käyttäjän syötteen HTML:ssä ilman suodatusta, jolloin JavaScript suoritetaan selaimessa. Reflected XSS tapahtuu heti pyynnön yhteydessä, kun taas Stored XSS tallentuu palvelimelle ja aktivoituu myöhemmin, kun sivu ladataan. Molemmat voivat varastaa evästeitä, hallita istuntoja tai ohjata käyttäjän haitallisille sivuille.

### E) Path Travelsal

tähän jäi jumiin katson tunnilla miten tehtävä saatiin tehtyä
en saanut zappia toimimaan sivulla.

#### Referenssit: 

Karvinen: https://terokarvinen.com/tunkeutumistestaus/

Popo Hack - Portswigger - XSS - Lab #1 Reflected XSS into HTML context with nothing encoded: https://www.youtube.com/watch?v=jOYyjuuifQ4

Z3nsh3ll - What Is Stored XSS? (Cross Site Scripting) : https://www.youtube.com/watch?v=dWQVRHGs6r4
